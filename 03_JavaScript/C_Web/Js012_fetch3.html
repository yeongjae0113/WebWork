<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>AJAX - JSON</title>
<style>
table,th,td {
  border : 1px solid black;
  border-collapse: collapse;
}
th,td {
  padding: 5px;
}
</style>
</head>
<script>
// 샘플 JSON
var url = 'JS/json_demo.txt';
</script>
<!-- 
JSON 문자열은
JSON.parse() 를 사용하면 JavaScript object 로 손쉽게 변환된다
 -->
<body>
<h2>AJAX + JSON</h2>
<button type="button" onclick="loadPet()">애완동물 목록 보기</button>
<button type="button" onclick="clearTable()">지우기</button>
<br><br>
<table>
<tr>
	<th>이름</th>
	<td id="name"></td>
</tr>
<tr>
	<th>나이</th>
	<td id="age"></td>
</tr>
<tr>
	<th>애완동물목록</th>
	<td id="pets"></td>
</tr>
</table>

<script>
function loadPet(){	

	fetch(url)
	// JS Object <= Response<Json Text>
	.then(response => response.json())	// Promise<Object>
		.then(myObj => {
			document.getElementById('name').innerHTML = myObj.name;
			document.getElementById('age').innerHTML = myObj.age;
			const result = [];
			for(p of myObj.pets) {
				result.push(`{p.animal} : ${p.name}`);
			}

			document.getElementById('pets').innerHTML = `<div>${result.join('<br>')}</div>`;
		});
	
}

function clearTable(){

	document.getElementById('name').innerHTML = "";
	document.getElementById('age').innerHTML = "";
	document.getElementById('pets').innerHTML = "";
	
}

</script>

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
</body>
</html>

















